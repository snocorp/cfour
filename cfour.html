<head>
  <title>cfour</title>
</head>

<body>
  <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">c4</a>
      </div>
      <div class="collapse navbar-collapse">
        {{> games}}
        
        <ul class="nav navbar-nav navbar-right">
          {{> loginButtons align="right"}}
        </ul>
      </div>
    </div>
  </nav>
  
  <div class="container">
    {{> board}}
  </div>
</body>

<template name="games">
  {{#if currentUser}}
    <ul class="nav navbar-nav">
      <li><a id="idNewGame" href="#">New Game</a></li>
      {{#if list.length}}
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Join a game<span class="caret"></span></a>
          <ul class="dropdown-menu games-list" role="menu">
            {{#each list}}
              <li><a href="#">{{player1.name}}</a></li>
            {{/each}}
          </ul>
        </li>
      {{/if}}
    </ul>
  {{/if}}
</template>

<template name="board">
  {{#if currentUser}}
    {{#if game}}
      <div class="alert alert-info" role="alert">
        {{status}}
      </div>
      <div>
        <table class="game-rack">
          {{#each rows}}
          <tr>
            {{#each this}}
            <td><div class="circle {{this.state}}"></div></td>
            {{/each}}
          </tr>
          {{/each}}
        </table>
      </div>
    {{else}}
      <div class="jumbotron">
        <h1>c4 &dash; four in a row</h1>
        <p>Join a game or start a new one to get started. Invite your friends to play against them in real time.</p>
      </div>
    {{/if}}
  {{else}}
    <div class="jumbotron">
      <h1>c4 &dash; four in a row</h1>
      <p>Sign up to get started!</p>
    </div>
  {{/if}}
</template>